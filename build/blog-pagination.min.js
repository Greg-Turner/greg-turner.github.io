/*! gregturner.github.io 2017-11-17 */

function produceBlogEntries(e){entryEl.innerHTML="";const t=parseInt(Array.from(e.target.classList).find(e=>{if(e.startsWith("page-"))return e}).split("-")[1]);t-1==0?previousEl.style.display="none":(previousEl.style.display="inline",previousEl.className=`page-${t-1}`),t+1>numberOfPages?nextEl.style.display="none":(nextEl.style.display="inline",nextEl.className=`page-${t+1}`);const n=filteredBlogs.slice((t-1)*entriesPerPage,t*entriesPerPage);for(let e=n.length-1;e>=0;e--){let t=n[e];entryEl.innerHTML+=`\n        <br>\n        <article class="entry{$currentEntry.entryId}">\n            <div class="label">${t.month} Entry ${t.entryId}: ${t.title}</div>\n            <br><br>\n            <p>${t.content}</p>\n\n        </article>\n        `}}function filterMyBlogs(){if(searchEl.value.length>=3){let e=searchEl.value.toLowerCase();filteredBlogs=gTurnerDbase.blogs.filter(t=>t.title.toLowerCase().includes(e)||t.content.toLowerCase().includes(e))}else filteredBlogs=gTurnerDbase.blogs;produceBlogEntries({target:{classList:["page-1"]}})}const gTurnerDbase=JSON.parse(localStorage.getItem("gTurnerDbase"))||{};gTurnerDbase.blogs=gTurnerDbase.blogs||[];const searchEl=document.querySelector("input[name='filter']");let filteredBlogs=gTurnerDbase.blogs;const totalEntries=gTurnerDbase.blogs.length,entriesPerPage=5,numberOfPages=Math.ceil(totalEntries/entriesPerPage),paginationEl=document.getElementById("entryPaginator"),entryEl=document.getElementsByClassName("entry")[0];let paginationString="<ul class='noStyle'>";paginationString+="<a id='previous' href='#'>&lt;</a>";for(let e=0;e<numberOfPages;e++)paginationString+=` <li><a class="entryPage page-${e+1}" href="#">${e+1}</a></li>`;paginationString+=" <a id='next' class='page-2' href='#'>&gt;</a>",paginationString+="</ul>",paginationEl.innerHTML=paginationString;const previousEl=document.getElementById("previous"),nextEl=document.getElementById("next"),entryLinks=document.getElementsByClassName("entryPage");for(let e=0;e<entryLinks.length;e++)entryLinks[e].addEventListener("click",produceBlogEntries,!1);produceBlogEntries({target:{classList:["page-1"]}}),previousEl.addEventListener("click",produceBlogEntries),nextEl.addEventListener("click",produceBlogEntries),searchEl.addEventListener("keyup",filterMyBlogs);